<!-- Input parameters -->
{% assign filterType = include.filterType %}
{% assign filterName = include.filterName %}

<!-- Initialize an empty array for campaigns -->
{% assign campaigns = '' | split: ',' %}

<!-- Filtering for character page -->
{% if filterType == "character" %}
    {% for campaignCharacterLink in site.data.campaign-character-link %}
        {% if campaignCharacterLink.characterName == filterName %}
            {% assign campaign = site.data.campaigns | where:"name", campaignCharacterLink.campaignName %}
            {% assign campaigns = campaigns | push: campaign %}
        {% endif %}
    {% endfor %}
{% else %}
    <!-- No filtering, get all campaigns -->
    {% assign campaigns = site.data.campaigns %}
{% endif %}

<!-- Sort by order of appearance -->
{% assign campaigns = campaigns | sort_natural:"order" %}

<ul>
    {% if campaigns.size == 0 %}
        <li>-</li>
    {% else %}
        {% for campaign in campaigns %}
            {% if campaign.visible or site.showInvisible %}
            <li>
                <a href="../campaigns/{% if campaign.customLink %}{{ campaign.customLink }}{% else %}{{ campaign.name | replace: ' ', '-' }}{% endif %}">
                    {{campaign.name}}
                </a>  
            </li>
            {% endif %}
        {% endfor %}
    {% endif %}
</ul>